{"ast":null,"code":"import _toConsumableArray from \"@babel/runtime/helpers/esm/toConsumableArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/home/zuares/Documents/Project/ZCommerce/components/molecules/Button/PayButton.js\",\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useContext, useEffect, useRef } from 'react';\nimport { DataContext } from '../../../store/GlobalState';\nimport { patchData, postData } from '../../../utils/fetchData';\n\nfunction PayButton(_ref) {\n  _s();\n\n  var order = _ref.order;\n  var refPayBtn = useRef();\n\n  var _useContext = useContext(DataContext),\n      state = _useContext.state,\n      dispatch = _useContext.dispatch;\n\n  var cart = state.cart,\n      auth = state.auth;\n  useEffect(function () {\n    paypal.Buttons({\n      createOrder: function createOrder(data, actions) {\n        // This function sets up the details of the transaction, including the amount and line item details.\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              value: '0.01'\n            }\n          }]\n        });\n      },\n      onApprove: function onApprove(data, actions) {\n        // This function captures the funds from the transaction.\n        return actions.order.capture().then(function (details) {\n          // This function shows a transaction success message to your buyer.\n          patchData('order', {\n            address: address,\n            mobile: mobile,\n            cart: cart,\n            total: total\n          }, auth.access_token).then(function (res) {\n            if (res.err) return dispatch({\n              type: \"NOTIFY\",\n              payload: {\n                msg: {\n                  err: res.err\n                }\n              }\n            });\n            dispatch({\n              type: \"CART\",\n              payload: []\n            });\n\n            var newOrder = _objectSpread(_objectSpread({}, res.newOrder), {}, {\n              user: auth.user\n            });\n\n            dispatch({\n              type: \"ORDER\",\n              payload: [].concat(_toConsumableArray(order), [newOrder])\n            });\n            dispatch({\n              type: \"NOTIFY\",\n              payload: {\n                msg: {\n                  success: res.msg\n                }\n              }\n            });\n          });\n          alert('Transaction completed by ' + details.payer.name.given_name);\n        });\n      }\n    }).render(refPayBtn.current);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: refPayBtn\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n}\n\n_s(PayButton, \"0osEhplNkDlkktMTThxZ8sk4Oh0=\");\n\n_c = PayButton;\nexport default PayButton;\n\nvar _c;\n\n$RefreshReg$(_c, \"PayButton\");","map":{"version":3,"sources":["/home/zuares/Documents/Project/ZCommerce/components/molecules/Button/PayButton.js"],"names":["React","useContext","useEffect","useRef","DataContext","patchData","postData","PayButton","order","refPayBtn","state","dispatch","cart","auth","paypal","Buttons","createOrder","data","actions","create","purchase_units","amount","value","onApprove","capture","then","details","address","mobile","total","access_token","res","err","type","payload","msg","newOrder","user","success","alert","payer","name","given_name","render","current"],"mappings":";;;;;;;;;;;AAAA,OAAOA,KAAP,IAAgBC,UAAhB,EAA4BC,SAA5B,EAAuCC,MAAvC,QAAqD,OAArD;AACA,SAASC,WAAT,QAA4B,4BAA5B;AACA,SAASC,SAAT,EAAoBC,QAApB,QAAoC,0BAApC;;AAEA,SAASC,SAAT,OAA8B;AAAA;;AAAA,MAATC,KAAS,QAATA,KAAS;AAC1B,MAAMC,SAAS,GAAGN,MAAM,EAAxB;;AAD0B,oBAEEF,UAAU,CAACG,WAAD,CAFZ;AAAA,MAElBM,KAFkB,eAElBA,KAFkB;AAAA,MAEXC,QAFW,eAEXA,QAFW;;AAAA,MAGlBC,IAHkB,GAGHF,KAHG,CAGlBE,IAHkB;AAAA,MAGZC,IAHY,GAGHH,KAHG,CAGZG,IAHY;AAI1BX,EAAAA,SAAS,CAAC,YAAM;AACZY,IAAAA,MAAM,CAACC,OAAP,CAAe;AACXC,MAAAA,WAAW,EAAE,qBAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AAClC;AACA,eAAOA,OAAO,CAACV,KAAR,CAAcW,MAAd,CAAqB;AACxBC,UAAAA,cAAc,EAAE,CAAC;AACbC,YAAAA,MAAM,EAAE;AACJC,cAAAA,KAAK,EAAE;AADH;AADK,WAAD;AADQ,SAArB,CAAP;AAOH,OAVU;AAWXC,MAAAA,SAAS,EAAE,mBAAUN,IAAV,EAAgBC,OAAhB,EAAyB;AAChC;AACA,eAAOA,OAAO,CAACV,KAAR,CAAcgB,OAAd,GAAwBC,IAAxB,CAA6B,UAAUC,OAAV,EAAmB;AACnD;AACArB,UAAAA,SAAS,CAAC,OAAD,EAAU;AAAEsB,YAAAA,OAAO,EAAPA,OAAF;AAAWC,YAAAA,MAAM,EAANA,MAAX;AAAmBhB,YAAAA,IAAI,EAAJA,IAAnB;AAAyBiB,YAAAA,KAAK,EAALA;AAAzB,WAAV,EAA4ChB,IAAI,CAACiB,YAAjD,CAAT,CACKL,IADL,CACU,UAAAM,GAAG,EAAI;AACT,gBAAIA,GAAG,CAACC,GAAR,EAAa,OAAOrB,QAAQ,CAAC;AAAEsB,cAAAA,IAAI,EAAE,QAAR;AAAkBC,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,GAAG,EAAE;AAAEH,kBAAAA,GAAG,EAAED,GAAG,CAACC;AAAX;AAAP;AAA3B,aAAD,CAAf;AAEbrB,YAAAA,QAAQ,CAAC;AAAEsB,cAAAA,IAAI,EAAE,MAAR;AAAgBC,cAAAA,OAAO,EAAE;AAAzB,aAAD,CAAR;;AACA,gBAAME,QAAQ,mCACPL,GAAG,CAACK,QADG;AAEVC,cAAAA,IAAI,EAAExB,IAAI,CAACwB;AAFD,cAAd;;AAIA1B,YAAAA,QAAQ,CAAC;AAAEsB,cAAAA,IAAI,EAAE,OAAR;AAAiBC,cAAAA,OAAO,+BAAM1B,KAAN,IAAa4B,QAAb;AAAxB,aAAD,CAAR;AACAzB,YAAAA,QAAQ,CAAC;AAAEsB,cAAAA,IAAI,EAAE,QAAR;AAAkBC,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,GAAG,EAAE;AAAEG,kBAAAA,OAAO,EAAEP,GAAG,CAACI;AAAf;AAAP;AAA3B,aAAD,CAAR;AACH,WAXL;AAaAI,UAAAA,KAAK,CAAC,8BAA8Bb,OAAO,CAACc,KAAR,CAAcC,IAAd,CAAmBC,UAAlD,CAAL;AACH,SAhBM,CAAP;AAiBH;AA9BU,KAAf,EA+BGC,MA/BH,CA+BUlC,SAAS,CAACmC,OA/BpB;AAiCH,GAlCQ,EAkCN,EAlCM,CAAT;AAmCA,sBACI;AAAK,IAAA,GAAG,EAAEnC;AAAV;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;;GA1CQF,S;;KAAAA,S;AA4CT,eAAeA,SAAf","sourcesContent":["import React, { useContext, useEffect, useRef } from 'react';\nimport { DataContext } from '../../../store/GlobalState';\nimport { patchData, postData } from '../../../utils/fetchData';\n\nfunction PayButton({ order }) {\n    const refPayBtn = useRef()\n    const { state, dispatch } = useContext(DataContext)\n    const { cart, auth } = state\n    useEffect(() => {\n        paypal.Buttons({\n            createOrder: function (data, actions) {\n                // This function sets up the details of the transaction, including the amount and line item details.\n                return actions.order.create({\n                    purchase_units: [{\n                        amount: {\n                            value: '0.01'\n                        }\n                    }]\n                });\n            },\n            onApprove: function (data, actions) {\n                // This function captures the funds from the transaction.\n                return actions.order.capture().then(function (details) {\n                    // This function shows a transaction success message to your buyer.\n                    patchData('order', { address, mobile, cart, total }, auth.access_token)\n                        .then(res => {\n                            if (res.err) return dispatch({ type: \"NOTIFY\", payload: { msg: { err: res.err } } })\n\n                            dispatch({ type: \"CART\", payload: [] })\n                            const newOrder = {\n                                ...res.newOrder,\n                                user: auth.user\n                            }\n                            dispatch({ type: \"ORDER\", payload: [...order, newOrder] })\n                            dispatch({ type: \"NOTIFY\", payload: { msg: { success: res.msg } } })\n                        })\n\n                    alert('Transaction completed by ' + details.payer.name.given_name);\n                });\n            }\n        }).render(refPayBtn.current);\n\n    }, []);\n    return (\n        <div ref={refPayBtn} ></div>\n    );\n}\n\nexport default PayButton;"]},"metadata":{},"sourceType":"module"}