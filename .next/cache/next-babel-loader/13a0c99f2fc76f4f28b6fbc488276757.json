{"ast":null,"code":"import connectDB from '../../../utils/connectDB';\nimport Order from '../../../models/orderModel';\nimport Product from '../../../models/productModel';\nimport auth from '../../../middleware/auth';\nconnectDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"PATCH\":\n      await paymentOrder(req, res);\n      break;\n  }\n});\n\nconst paymentOrder = async (req, res) => {\n  try {\n    const result = await auth(req, res);\n    const {\n      id\n    } = req.query;\n    await Order.findOneAndUpdate({\n      _id: id\n    }, {\n      paid: true,\n      dateOfPayment: new Date().toISOString()\n    });\n    res.json({\n      msg: `Payment success`\n    });\n  } catch (error) {\n    return res.status(500).json({\n      err: err.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/zuares/Documents/Project/ZCommerce/pages/api/order/[id].js"],"names":["connectDB","Order","Product","auth","req","res","method","paymentOrder","result","id","query","findOneAndUpdate","_id","paid","dateOfPayment","Date","toISOString","json","msg","error","status","err","message"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AAEAH,SAAS;AAET,gBAAe,OAAOI,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,UAAQD,GAAG,CAACE,MAAZ;AACI,SAAK,OAAL;AACI,YAAMC,YAAY,CAACH,GAAD,EAAMC,GAAN,CAAlB;AACA;AAHR;AAKH,CAND;;AAQA,MAAME,YAAY,GAAG,OAAOH,GAAP,EAAYC,GAAZ,KAAoB;AACrC,MAAI;AACA,UAAMG,MAAM,GAAG,MAAML,IAAI,CAACC,GAAD,EAAMC,GAAN,CAAzB;AACA,UAAM;AAAEI,MAAAA;AAAF,QAASL,GAAG,CAACM,KAAnB;AAEA,UAAMT,KAAK,CAACU,gBAAN,CAAuB;AAAEC,MAAAA,GAAG,EAAEH;AAAP,KAAvB,EAAoC;AACtCI,MAAAA,IAAI,EAAE,IADgC;AAC1BC,MAAAA,aAAa,EAAE,IAAIC,IAAJ,GAAWC,WAAX;AADW,KAApC,CAAN;AAIAX,IAAAA,GAAG,CAACY,IAAJ,CAAS;AAAEC,MAAAA,GAAG,EAAG;AAAR,KAAT;AAEH,GAVD,CAUE,OAAOC,KAAP,EAAc;AACZ,WAAOd,GAAG,CAACe,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB;AAAEI,MAAAA,GAAG,EAAEA,GAAG,CAACC;AAAX,KAArB,CAAP;AACH;AACJ,CAdD","sourcesContent":["import connectDB from '../../../utils/connectDB'\nimport Order from '../../../models/orderModel'\nimport Product from '../../../models/productModel'\nimport auth from '../../../middleware/auth'\n\nconnectDB()\n\nexport default async (req, res) => {\n    switch (req.method) {\n        case \"PATCH\":\n            await paymentOrder(req, res)\n            break;\n    }\n}\n\nconst paymentOrder = async (req, res) => {\n    try {\n        const result = await auth(req, res)\n        const { id } = req.query\n\n        await Order.findOneAndUpdate({ _id: id }, {\n            paid: true, dateOfPayment: new Date().toISOString()\n        })\n\n        res.json({ msg: `Payment success` })\n\n    } catch (error) {\n        return res.status(500).json({ err: err.message })\n    }\n}"]},"metadata":{},"sourceType":"module"}