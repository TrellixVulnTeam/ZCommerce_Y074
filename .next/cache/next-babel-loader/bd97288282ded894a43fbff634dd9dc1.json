{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/home/zuares/Documents/Project/ZCommerce/components/molecules/Button/PayButton.js\";\nimport React, { useEffect, useRef } from 'react';\nimport { postData } from '../../../utils/fetchData';\n\nfunction PayButton({\n  total,\n  address,\n  mobile,\n  state,\n  dispatch\n}) {\n  const refPayBtn = useRef();\n  const {\n    cart,\n    auth,\n    order\n  } = state;\n  useEffect(() => {\n    paypal.Buttons({\n      createOrder: function (data, actions) {\n        // This function sets up the details of the transaction, including the amount and line item details.\n        return actions.order.create({\n          purchase_units: [{\n            amount: {\n              value: '0.01'\n            }\n          }]\n        });\n      },\n      onApprove: function (data, actions) {\n        // This function captures the funds from the transaction.\n        return actions.order.capture().then(function (details) {\n          // This function shows a transaction success message to your buyer.\n          postData('order', {\n            address,\n            mobile,\n            cart,\n            total\n          }, auth.access_token).then(res => {\n            if (res.err) return dispatch({\n              type: \"NOTIFY\",\n              payload: {\n                msg: {\n                  err: res.err\n                }\n              }\n            });\n            dispatch({\n              type: \"CART\",\n              payload: []\n            });\n            dispatch({\n              type: \"ORDER\",\n              payload: [...order, res.newOrder]\n            });\n            dispatch({\n              type: \"NOTIFY\",\n              payload: {\n                msg: {\n                  success: res.msg\n                }\n              }\n            });\n          });\n          alert('Transaction completed by ' + details.payer.name.given_name);\n        });\n      }\n    }).render(refPayBtn.current);\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    ref: refPayBtn\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 39,\n    columnNumber: 9\n  }, this);\n}\n\nexport default PayButton;","map":{"version":3,"sources":["/home/zuares/Documents/Project/ZCommerce/components/molecules/Button/PayButton.js"],"names":["React","useEffect","useRef","postData","PayButton","total","address","mobile","state","dispatch","refPayBtn","cart","auth","order","paypal","Buttons","createOrder","data","actions","create","purchase_units","amount","value","onApprove","capture","then","details","access_token","res","err","type","payload","msg","newOrder","success","alert","payer","name","given_name","render","current"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,MAA3B,QAAyC,OAAzC;AACA,SAASC,QAAT,QAAyB,0BAAzB;;AAEA,SAASC,SAAT,CAAmB;AAAEC,EAAAA,KAAF;AAASC,EAAAA,OAAT;AAAkBC,EAAAA,MAAlB;AAA0BC,EAAAA,KAA1B;AAAiCC,EAAAA;AAAjC,CAAnB,EAAgE;AAC5D,QAAMC,SAAS,GAAGR,MAAM,EAAxB;AACA,QAAM;AAAES,IAAAA,IAAF;AAAQC,IAAAA,IAAR;AAAcC,IAAAA;AAAd,MAAwBL,KAA9B;AACAP,EAAAA,SAAS,CAAC,MAAM;AACZa,IAAAA,MAAM,CAACC,OAAP,CAAe;AACXC,MAAAA,WAAW,EAAE,UAAUC,IAAV,EAAgBC,OAAhB,EAAyB;AAClC;AACA,eAAOA,OAAO,CAACL,KAAR,CAAcM,MAAd,CAAqB;AACxBC,UAAAA,cAAc,EAAE,CAAC;AACbC,YAAAA,MAAM,EAAE;AACJC,cAAAA,KAAK,EAAE;AADH;AADK,WAAD;AADQ,SAArB,CAAP;AAOH,OAVU;AAWXC,MAAAA,SAAS,EAAE,UAAUN,IAAV,EAAgBC,OAAhB,EAAyB;AAChC;AACA,eAAOA,OAAO,CAACL,KAAR,CAAcW,OAAd,GAAwBC,IAAxB,CAA6B,UAAUC,OAAV,EAAmB;AACnD;AACAvB,UAAAA,QAAQ,CAAC,OAAD,EAAU;AAAEG,YAAAA,OAAF;AAAWC,YAAAA,MAAX;AAAmBI,YAAAA,IAAnB;AAAyBN,YAAAA;AAAzB,WAAV,EAA4CO,IAAI,CAACe,YAAjD,CAAR,CACKF,IADL,CACUG,GAAG,IAAI;AACT,gBAAIA,GAAG,CAACC,GAAR,EAAa,OAAOpB,QAAQ,CAAC;AAAEqB,cAAAA,IAAI,EAAE,QAAR;AAAkBC,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,GAAG,EAAE;AAAEH,kBAAAA,GAAG,EAAED,GAAG,CAACC;AAAX;AAAP;AAA3B,aAAD,CAAf;AAEbpB,YAAAA,QAAQ,CAAC;AAAEqB,cAAAA,IAAI,EAAE,MAAR;AAAgBC,cAAAA,OAAO,EAAE;AAAzB,aAAD,CAAR;AACAtB,YAAAA,QAAQ,CAAC;AAAEqB,cAAAA,IAAI,EAAE,OAAR;AAAiBC,cAAAA,OAAO,EAAE,CAAC,GAAGlB,KAAJ,EAAWe,GAAG,CAACK,QAAf;AAA1B,aAAD,CAAR;AACAxB,YAAAA,QAAQ,CAAC;AAAEqB,cAAAA,IAAI,EAAE,QAAR;AAAkBC,cAAAA,OAAO,EAAE;AAAEC,gBAAAA,GAAG,EAAE;AAAEE,kBAAAA,OAAO,EAAEN,GAAG,CAACI;AAAf;AAAP;AAA3B,aAAD,CAAR;AACH,WAPL;AASAG,UAAAA,KAAK,CAAC,8BAA8BT,OAAO,CAACU,KAAR,CAAcC,IAAd,CAAmBC,UAAlD,CAAL;AACH,SAZM,CAAP;AAaH;AA1BU,KAAf,EA2BGC,MA3BH,CA2BU7B,SAAS,CAAC8B,OA3BpB;AA6BH,GA9BQ,EA8BN,EA9BM,CAAT;AA+BA,sBACI;AAAK,IAAA,GAAG,EAAE9B;AAAV;AAAA;AAAA;AAAA;AAAA,UADJ;AAGH;;AAED,eAAeN,SAAf","sourcesContent":["import React, { useEffect, useRef } from 'react';\nimport { postData } from '../../../utils/fetchData';\n\nfunction PayButton({ total, address, mobile, state, dispatch }) {\n    const refPayBtn = useRef()\n    const { cart, auth, order } = state\n    useEffect(() => {\n        paypal.Buttons({\n            createOrder: function (data, actions) {\n                // This function sets up the details of the transaction, including the amount and line item details.\n                return actions.order.create({\n                    purchase_units: [{\n                        amount: {\n                            value: '0.01'\n                        }\n                    }]\n                });\n            },\n            onApprove: function (data, actions) {\n                // This function captures the funds from the transaction.\n                return actions.order.capture().then(function (details) {\n                    // This function shows a transaction success message to your buyer.\n                    postData('order', { address, mobile, cart, total }, auth.access_token)\n                        .then(res => {\n                            if (res.err) return dispatch({ type: \"NOTIFY\", payload: { msg: { err: res.err } } })\n\n                            dispatch({ type: \"CART\", payload: [] })\n                            dispatch({ type: \"ORDER\", payload: [...order, res.newOrder] })\n                            dispatch({ type: \"NOTIFY\", payload: { msg: { success: res.msg } } })\n                        })\n\n                    alert('Transaction completed by ' + details.payer.name.given_name);\n                });\n            }\n        }).render(refPayBtn.current);\n\n    }, []);\n    return (\n        <div ref={refPayBtn} ></div>\n    );\n}\n\nexport default PayButton;"]},"metadata":{},"sourceType":"module"}