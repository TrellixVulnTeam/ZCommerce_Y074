{"ast":null,"code":"import connectDB from '../../../utils/connectDB';\nimport User from '../../../models/userModel';\nimport auth from '../../../middleware/auth';\nconnectDB();\nexport default (async (req, res) => {\n  switch (req.method) {\n    case \"PATCH\":\n      await upload(req, res);\n      break;\n  }\n});\n\nconst upload = async (req, res) => {\n  try {\n    const result = await auth(req, res);\n    const {\n      name,\n      avatar\n    } = req.body;\n    const newUser = await User.findOneAndUpdate({\n      _id: result.id\n    }, {\n      name,\n      avatar\n    }).select(\"-password\");\n    console.log(newUser);\n    res.json({\n      msg: \"Update Success\",\n      user: newUser\n    });\n  } catch (err) {\n    return res.status(500).json({\n      err: err.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/zuares/Documents/Project/ZCommerce/pages/api/user/index.js"],"names":["connectDB","User","auth","req","res","method","upload","result","name","avatar","body","newUser","findOneAndUpdate","_id","id","select","console","log","json","msg","user","err","status","message"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,IAAP,MAAiB,2BAAjB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AAEAF,SAAS;AAET,gBAAe,OAAOG,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,UAAQD,GAAG,CAACE,MAAZ;AACI,SAAK,OAAL;AACI,YAAMC,MAAM,CAACH,GAAD,EAAMC,GAAN,CAAZ;AACA;AAHR;AAKH,CAND;;AAQA,MAAME,MAAM,GAAG,OAAOH,GAAP,EAAYC,GAAZ,KAAoB;AAC/B,MAAI;AACA,UAAMG,MAAM,GAAG,MAAML,IAAI,CAACC,GAAD,EAAMC,GAAN,CAAzB;AACA,UAAM;AAAEI,MAAAA,IAAF;AAAQC,MAAAA;AAAR,QAAmBN,GAAG,CAACO,IAA7B;AAEA,UAAMC,OAAO,GAAG,MAAMV,IAAI,CAACW,gBAAL,CAAsB;AAAEC,MAAAA,GAAG,EAAEN,MAAM,CAACO;AAAd,KAAtB,EAA0C;AAAEN,MAAAA,IAAF;AAAQC,MAAAA;AAAR,KAA1C,EAA4DM,MAA5D,CAAmE,WAAnE,CAAtB;AACAC,IAAAA,OAAO,CAACC,GAAR,CAAYN,OAAZ;AACAP,IAAAA,GAAG,CAACc,IAAJ,CAAS;AACLC,MAAAA,GAAG,EAAE,gBADA;AAELC,MAAAA,IAAI,EAAET;AAFD,KAAT;AAIH,GAVD,CAUE,OAAOU,GAAP,EAAY;AACV,WAAOjB,GAAG,CAACkB,MAAJ,CAAW,GAAX,EAAgBJ,IAAhB,CAAqB;AAAEG,MAAAA,GAAG,EAAEA,GAAG,CAACE;AAAX,KAArB,CAAP;AACH;AACJ,CAdD","sourcesContent":["import connectDB from '../../../utils/connectDB'\nimport User from '../../../models/userModel'\nimport auth from '../../../middleware/auth'\n\nconnectDB()\n\nexport default async (req, res) => {\n    switch (req.method) {\n        case \"PATCH\":\n            await upload(req, res)\n            break;\n    }\n}\n\nconst upload = async (req, res) => {\n    try {\n        const result = await auth(req, res)\n        const { name, avatar } = req.body\n\n        const newUser = await User.findOneAndUpdate({ _id: result.id }, { name, avatar }).select(\"-password\")\n        console.log(newUser);\n        res.json({\n            msg: \"Update Success\",\n            user: newUser\n        })\n    } catch (err) {\n        return res.status(500).json({ err: err.message })\n    }\n}"]},"metadata":{},"sourceType":"module"}