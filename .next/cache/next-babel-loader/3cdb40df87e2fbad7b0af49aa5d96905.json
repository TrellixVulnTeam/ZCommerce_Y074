{"ast":null,"code":"import connectDB from '../../../utils/connectDB';\nimport Order from '../../../models/orderModel';\nimport Product from '../../../models/productModel';\nimport auth from '../../../middleware/auth';\nconnectDB();\nexport default (async (req, res) => {\n  console.log(req.method);\n\n  switch (req.method) {\n    case \"PATCH\":\n      await paymentOrder(req, res);\n      break;\n  }\n});\n\nconst paymentOrder = async (req, res) => {\n  console.log(req.query);\n\n  try {\n    const result = await auth(req, res);\n    const {\n      id\n    } = req.query;\n    await Order.findOneAndUpdate({\n      _id: id\n    }, {\n      paid: true,\n      dateOfPayment: new Date().toISOString()\n    });\n    res.json({\n      msg: `Payment success`\n    });\n  } catch (error) {\n    return res.status(500).json({\n      err: err.message\n    });\n  }\n};","map":{"version":3,"sources":["/home/zuares/Documents/Project/ZCommerce/pages/api/order/[id].js"],"names":["connectDB","Order","Product","auth","req","res","console","log","method","paymentOrder","query","result","id","findOneAndUpdate","_id","paid","dateOfPayment","Date","toISOString","json","msg","error","status","err","message"],"mappings":"AAAA,OAAOA,SAAP,MAAsB,0BAAtB;AACA,OAAOC,KAAP,MAAkB,4BAAlB;AACA,OAAOC,OAAP,MAAoB,8BAApB;AACA,OAAOC,IAAP,MAAiB,0BAAjB;AAEAH,SAAS;AAET,gBAAe,OAAOI,GAAP,EAAYC,GAAZ,KAAoB;AAC/BC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACI,MAAhB;;AACA,UAAQJ,GAAG,CAACI,MAAZ;AACI,SAAK,OAAL;AACI,YAAMC,YAAY,CAACL,GAAD,EAAMC,GAAN,CAAlB;AACA;AAHR;AAKH,CAPD;;AASA,MAAMI,YAAY,GAAG,OAAOL,GAAP,EAAYC,GAAZ,KAAoB;AACrCC,EAAAA,OAAO,CAACC,GAAR,CAAYH,GAAG,CAACM,KAAhB;;AACA,MAAI;AACA,UAAMC,MAAM,GAAG,MAAMR,IAAI,CAACC,GAAD,EAAMC,GAAN,CAAzB;AACA,UAAM;AAAEO,MAAAA;AAAF,QAASR,GAAG,CAACM,KAAnB;AAEA,UAAMT,KAAK,CAACY,gBAAN,CAAuB;AAAEC,MAAAA,GAAG,EAAEF;AAAP,KAAvB,EAAoC;AACtCG,MAAAA,IAAI,EAAE,IADgC;AAC1BC,MAAAA,aAAa,EAAE,IAAIC,IAAJ,GAAWC,WAAX;AADW,KAApC,CAAN;AAGAb,IAAAA,GAAG,CAACc,IAAJ,CAAS;AAAEC,MAAAA,GAAG,EAAG;AAAR,KAAT;AAEH,GATD,CASE,OAAOC,KAAP,EAAc;AACZ,WAAOhB,GAAG,CAACiB,MAAJ,CAAW,GAAX,EAAgBH,IAAhB,CAAqB;AAAEI,MAAAA,GAAG,EAAEA,GAAG,CAACC;AAAX,KAArB,CAAP;AACH;AACJ,CAdD","sourcesContent":["import connectDB from '../../../utils/connectDB'\nimport Order from '../../../models/orderModel'\nimport Product from '../../../models/productModel'\nimport auth from '../../../middleware/auth'\n\nconnectDB()\n\nexport default async (req, res) => {\n    console.log(req.method);\n    switch (req.method) {\n        case \"PATCH\":\n            await paymentOrder(req, res)\n            break;\n    }\n}\n\nconst paymentOrder = async (req, res) => {\n    console.log(req.query);\n    try {\n        const result = await auth(req, res)\n        const { id } = req.query\n\n        await Order.findOneAndUpdate({ _id: id }, {\n            paid: true, dateOfPayment: new Date().toISOString()\n        })\n        res.json({ msg: `Payment success` })\n\n    } catch (error) {\n        return res.status(500).json({ err: err.message })\n    }\n}"]},"metadata":{},"sourceType":"module"}